php_miniblog_requirements

# PHPミニブログ 要件定義

## 1. 目的
- PHP学習の成果物として、**1日1本の学習記録**を公開するミニブログを構築し、**コアサーバー**で運用する。
- 投稿者は**本人のみ**、閲覧は**誰でも**可能。
- SEOは最小限、**X（旧Twitter）等でリンク共有**して閲読を想定。

## 2. 想定ユーザー/権限
- **管理者（=投稿者）**：ログイン・投稿・編集・削除。
- **ゲスト**：閲覧のみ。
- **認証方式**：Googleアカウントでログインし、**許可メールアドレス1件**のみ管理機能を利用可。


## 3. 主要機能（概要）
1) **トップ（カレンダー）**
   - 当月のカレンダー表示（前月/翌月へ移動可）。
   - 記事のある日に印（例：●）を表示。
   - 日付クリックでその日の記事詳細へ遷移。

2) **記事詳細**
   - 指定日の学習記録を表示（1日1本）。
   - 「修正」「コピーして共有」「削除」が可能。
   - 前日/翌日へのナビゲーション。

3) **投稿**
   - 入力フォームから送信 → 記事詳細へ遷移した瞬間に公開。
   - 以後、記事詳細画面で編集・共有を行う。

4) **編集/削除**
   - 記事詳細から編集へ遷移し内容を更新。URLは固定。
   - 不要な記事は削除（論理/物理は設計時選定）。

5) **認証/認可**
   - Googleアカウントでログインし、許可メール一致時のみ管理操作が可能。

6) **その他**
   - PC/スマホの双方で投稿・閲覧可能（レスポンシブ）。
   - タイムゾーンは **Asia/Tokyo**。

## 4. 画面要件
### 4.1 トップ（カレンダー）
- 当月カレンダー表示、記事有日の印。
- 前月/翌月へ移動可能。
- 今日のハイライト。

### 4.2 記事詳細
- 表示要素：
  - 投稿日付（必須、1日1件）
  - 科目一覧（複数可）と**科目ごとの内容**と**科目ごとの学習時間**
  - 自由記述テキスト（1000文字以内、絵文字可）
- 操作：
  - **修正**（内容の再編集。更新後も同一URL）
　- **コピーして共有**（表示要素の全文と共有用URLをクリップボードにコピー）
  - 前日/翌日ナビゲーション
  - **削除**

### 4.3 投稿フォーム
- 入力項目：日付、科目（複数行）、科目ごとの内容、科目ごとの学習時間、自由記述テキスト（1000文字）。
- バリデーション：日付必須・重複不可、テキストは1000文字以内、絵文字可。

## 5. データ要件（概要）
### 5.1 投稿（Post）
- 1日1件のみ（同一日付での重複禁止）。
- 本文は最大1000文字、絵文字対応（UTF-8拡張相当）。

### 5.2 科目（Subject）と記事-科目の関係
- **Subject**をカタログとして管理するため、**subjectテーブル**を設置。
  - 例：`Java`, `DB`, `アルゴリズム`, 特定の教材名などを一意に登録。
- **post_subject**は**記事とsubjectの紐付け**を担う。
  - 別ポスト間に同一教材が登場しても、同一の**Subject ID**で識別可能。
  - 記事側には当日の学習の具体的な科目ごとの内容（短文）と学習時間を保持。


### 5.3 管理者（Admin）
- 許可メールアドレスを1件保持（本人のみ投稿可）。

## 6. 非機能要件（概要）
- 規模：小規模アクセス想定。
- 可用性：常時公開（メンテ時を除く）。
- セキュリティ：HTTPS必須、CSRF/XSS対策、認証後のみ管理操作。
- バックアップ：データの定期バックアップ（少なくとも1か月に1回）。
- ログ：アクセス/エラー、管理操作の最低限の記録。
- アクセシビリティ：スマホ表示の視認性、フォーカス可視化。

## 7. 受け入れ基準
1. トップで当月カレンダーが表示され、記事のある日に印が付く。  
2. 日付クリックで**記事詳細（=確認）**が表示される。  
3. 1日1件を超える投稿は受け付けない。  
4. 投稿フォーム送信後、**記事詳細（=確認）**に遷移した時点で公開済みとなる。  
5. **記事詳細（=確認）**で「修正」「コピーして共有」が行える（URLは不変）。  
6. 管理機能は許可された本人アカウントのみ利用可能。  
7. モバイル幅でレイアウトが破綻しない。  
8. 自由記述テキストは1000文字を超えるとエラーとなる。  
9. 絵文字を含む投稿が正しく保存・表示される。  

